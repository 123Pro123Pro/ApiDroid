<div class="container-fluid">
    <div id="hooks-div">
        <p id="toggle_hook_info" class="text-primary" style="cursor: pointer;">Hook <i
                class="glyphicon glyphicon-resize-small"></i></p>
        <div class="well" id="hook-info-div" style="padding-bottom: 5px;">
            <div id="hook_info">
                <div class="row">
                    <div id="inputhook" class="col-sm-6">
                        <div class="dropdown">
                            <button id="btn_list_class" style="width: 20%; float: left; border-bottom-right-radius: 0px;border-top-right-radius: 0px;" class="btn btn-success dropdown-toggle" type="button" data-toggle="dropdown">Class*
                            <span class="caret"></span></button>
                            
                            <input style="width: 80%; float: left; border-bottom-left-radius: 0px;border-top-left-radius: 0px;" id="classname" class="form-control" placeholder="classname">
                            <ul id="list_class" class="dropdown-menu">
                              <li><a href="#">List lass</a></li>
                            </ul> 
                        </div>
 
                        <div class="dropdown">
                            <button style="width: 20%; float: left; border-bottom-right-radius: 0px;border-top-right-radius: 0px;" id="btn_list_method" class="btn btn-success dropdown-toggle" type="button" data-toggle="dropdown">Method*
                            <span class="caret"></span></button>
                            <ul id="list_method" class="dropdown-menu">
                              <li><a href="#">List Method</a></li>
                            </ul>
                            <input style="width: 80%; float: left; border-bottom-left-radius: 0px;border-top-left-radius: 0px;" id="method" class="form-control" placeholder="method"></input>
                          </div>
                        
                        <div class="dropdown">
                            <button style="width: 20%; float: left; border-bottom-right-radius: 0px;border-top-right-radius: 0px;"  onclick="listOverLoadMethod()" class="btn btn-success dropdown-toggle" type="button" data-toggle="dropdown">Overload type
                            <span class="caret"></span> <a onclick="showOverLoadMethod()"><i class="glyphicon glyphicon-refresh"></i></a></button>
                            <ul class="dropdown-menu" id="ul_overLoadMethods">
                              <li><a href="#">List overload type</a></li>
                            </ul>
                          </div>
                        <input style="width: 80%; float: left; border-bottom-left-radius: 0px;border-top-left-radius: 0px;" id="overload_type" class="form-control"
                               placeholder="'java.lang.String', 'java.lang.String' : leave blank to hook all overloads">
                        <input id="dyload_path" class="form-control"
                               placeholder="Dex/Jar Path: for dynamically loaded classes; leave blank for default classloader">
                        <button id="add_hook" class="btn btn-info">Add</button>
                        <button id="hook_clear" class="btn">Clear</button> 
                    </div>
                    <div class="col-sm-6">
                        <!-- <p class="text-primary"> Current Hooks </p> -->
                        <div id="editor" style="height: 135px; border-top-right-radius: 15px; border-top-left-radius: 15px;">{"classname":"","method":""}
                        </div>
                        <!-- <button id="save_hook" class="btn btn-info ">Save</button> -->
                        <button id="gen_script" class="btn btn-success ">Generate Script</button>
                        <!-- Button trigger modal -->
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#hooks_history"
                                onclick="get_hooks_history();">
                            History
                        </button>
                        <button id="gen_script_mini" class="btn btn-success ">Mini Script</button>
                        <!-- Modal -->
                        <div class="modal fade" id="hooks_history" tabindex="-1" role="dialog"
                             aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle"><code>./cache/hook</code>
                                        </h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body " id="hooks_history_output">
                                        <div class="row">
                                            <div class="col-md-4 pre-scrollable" id="dir_hooks_lst">
                                            </div>
                                            <div id="editor_hook_history" class="col-md-8 ml-auto"></div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary" data-dismiss="modal"
                                                onclick="load_hook_history_script();">Load this
                                        </button>
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="row">
                    
                    <div class="col-sm-12">
                        <b> Script: </b>
                        <button id="load_script" class="btn btn-success">Load</button>
                        <button id="hooks_detach" class="btn btn-warning" onclick="unload_script();">Unload</button>
                        <button class="btn btn-info" data-toggle="collapse" data-target="#editor2">View</button>
                        <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#save_hook_script">
                            Save
                        </button>
                        <div id="editor2"  class="collapse" ></div>
                        <!-- Modal -->
                        <div class="modal fade" id="save_hook_script" tabindex="-1" role="dialog"
                             aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-body ">
                                        <div class="container-fluid">
                                            <p class="text-primary">Save As: </p>
                                            <br/>
                                            <input id="save_hookscript_name" class="form-control"
                                                   placeholder="classname" value="hook_tmp">
                                            <br/>
                                            <button class="btn btn-success" type="button" id="save_hook_script_button">
                                                Save
                                            </button>
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                    id="close_save_hook_script">Close
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br/>
                </div>
            </div>
        </div>
        <p class="text-primary"> Hooking History <i class="glyphicon glyphicon-remove clickable"
                                                       onclick="clear_hookMessage()"></i></p>
        <div class="pre-scrollable" style="min-height: 350px;">
            
            <table class="table table-striped table-bordered" id="outputTbl">
                <colgroup>
                   <col span="1" style="width: 25%;">
                   <col span="1" style="width: 25%;">
                   <col span="1" style="width: 35%;">
                   <col span="1" style="width: 10%;">
                </colgroup>
                <thead>
                <tr>
                    <th style="">MethodName <a onclick="sortTable(0)" id="0_col" check='false'><i class="glyphicon glyphicon-sort"></i></a></th>
                    <th style="">Args value <a onclick="sortTable(1)" id="1_col" check='false'><i class="glyphicon glyphicon-sort"></i></a></th>
                    <th style="">Return value <a onclick="sortTable(2)" id="2_col" check='false'><i class="glyphicon glyphicon-sort"></i></a></th>
                    <th style="">Time <a onclick="sortTable(3)" id="3_col" check='false'><i class="glyphicon glyphicon-sort"></i></a></th>
                </tr>
                </thead>
                <tbody id="outputBody"></tbody>
            </table>
        </div>
      
      <div class="row">
        <p class="text-info">Text view </p><button class="btn btn-outline-info" onclick="json_beautiful()">Json Beautiful</button>
        <div id="editor_view_hooks" style="height: 200px;"></div>
      </div>
    </div>
<script>

function sortTable(index) {
  var table, rows, switching, i, x, y, shouldSwitch;
  table = document.getElementById("outputTbl");
  switching = true;
  /* Make a loop that will continue until
  no switching has been done: */
  while (switching) {
    // Start by saying: no switching is done:
    switching = false;
    rows = table.rows;
    /* Loop through all table rows (except the
    first, which contains table headers): */
    for (i = 1; i < (rows.length - 1); i++) {
      // Start by saying there should be no switching:
      shouldSwitch = false;
      /* Get the two elements you want to compare,
      one from current row and one from the next: */
      x = rows[i].getElementsByTagName("TD")[index];
      y = rows[i + 1].getElementsByTagName("TD")[index];
      // Check if the two rows should switch place:
      if(document.getElementById(index+'_col').getAttribute("check") == 'false'){
        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
        // If so, mark as a switch and break the loop:
            shouldSwitch = true;
            break;
        }
      }
      else {
        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
            // If so, mark as a switch and break the loop:
            shouldSwitch = true;
            break;
        }
      }
      
    }
    if (shouldSwitch) {
      /* If a switch has been marked, make the switch
      and mark that a switch has been done: */
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
    }
  }

    if(document.getElementById(index+'_col').getAttribute("check") == 'false'){
        document.getElementById(index+'_col').setAttribute("check", "true");
    } else {
        document.getElementById(index+'_col').setAttribute("check", "false");
    }
}
</script>
<script>

  document.getElementById("btn_list_class").onclick = function(){
      var str ="";
      for (var i = 0; i <= newFilterClass.length - 1; i++) {
          str+="<li><a onclick='document.getElementById(\"classname\").value=this.innerHTML.substring(1, this.innerHTML.length-1);getMethod();'>"+ newFilterClass[i]+"</a></li>";
      }
      document.getElementById("list_class").innerHTML = str;
  }  

  function listMethodHook(classname){
    document.getElementById("class_to_find").value = classname;
    document.getElementById("find_class").click();
    document.getElementById("load_script_enum").click();
    
  }

function listOverLoadMethod(){
  document.getElementById("inspect_classname").value =  document.getElementById("classname").value;
  document.getElementById("inspect_method").value = document.getElementById("method").value;
  document.getElementById("Inspect").click();
}

function showOverLoadMethod(){
    var str = "";
    var overLoadMethods = document.getElementById("indexSelect").getElementsByTagName("option");
    for (var i =overLoadMethods.length - 1; i >= 0; i--) {
        var overLoadMethod = JSON.parse(overLoadMethods[i].innerHTML)["Arg"].replace(",","','").replace("[","'").replace("]","'");
        
        str+=
        `
        <li><a onclick='insertOverloadMethod(this.innerHTML)'>`+overLoadMethod+`</a></li>

        `
    }
    document.getElementById("ul_overLoadMethods").innerHTML = str;
    console.log(str)
}   

function insertOverloadMethod(str){
    document.getElementById("overload_type").value = str;
    console.log(str);
}
</script>